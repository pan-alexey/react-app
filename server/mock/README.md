Приложение не использует роутер:

1. Зпрос обрабатывается прокси
2. Прокси собирает необходимую информацию:
* Тип страницы в зависимости от url
* Модель устройства (mobile, desktop) [1]
* Является ли поисковым ботом [2]
* id устройства в системе (split test) [3]
3. прокси передает запрос в сервис url-service*

#

url-service:
1. Отвечает за redirect
2. Определяет тип страницы
3. парсит параметры из url
передает в сервис фасал facade-service

facade-front:
1. в зависимости от типа страницы формирует список виджетов.
2. фасад собирает стейт для каждого виджета (кроме спец виджетов, называемых async)

facade-api:
1. фасад собирает стейт для api и возвращает данные в зависимости от параметров

# 
[3] - client_id создается при первом запросе и созраняется в cookie; 

#
Все coockie шифруются алгоритмом AES;
В coockie подмешивается секрет, который обновляется при каждом запросе.
Перед тем как запрос перейдет в приложение, cookie валидируются.